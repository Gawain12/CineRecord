# CineRecord

CineRecord 是一款基于Web的图形化工具，旨在帮助您轻松同步豆瓣和IMDb的电影评分数据。它提供了一个直观的用户界面，让您可以获取、预览、同步和合并两大平台的评分，并内置了强大的永久失败清单功能，以避免重复同步已知会失败的项目。

![CineRecord UI](./web/static/images/cinesync_ui.png)

## 主要功能

- **图形化操作界面**：所有操作都在一个清晰的双栏布局Web界面中完成，无需记忆复杂的命令行参数。
- **数据获取与预览**：轻松输入用户ID和Cookie，一键抓取豆瓣和IMDb的评分数据，并在界面上实时预览样本。
- **智能同步预览**：在执行真正的同步操作前，可以预览将要同步的电影列表，让您对数据变更了如指掌。
- **双向同步**：支持从豆瓣同步到IMDb，也支持从IMDb同步到豆瓣。
- **永久失败清单**：对于因API问题或数据不完整而同步失败的项目，系统会自动将其添加到一个永久失败清单（`failed_sync_items.csv`）中。在后续的同步操作中，这些项目会被自动跳过，并清晰地展示在“同步失败”列表中，大大提高了同步效率和用户体验。
- **合并数据视图**：同步完成后，会自动生成一个合并后的数据文件（`merged_ratings_*.csv`），并在UI上展示其摘要，方便您进行数据核对和下载。
- **配置持久化**：您的用户ID和Cookie等配置会自动保存到本地`config/config.py`文件中，下次使用时无需重复输入。

## 如何运行

1.  **安装依赖:**
    确保您已安装Python 3.x环境和pip。然后安装项目所需的库：
    ```bash
    pip install -r requirements.txt
    ```

2.  **启动Web服务:**
    运行`web/app.py`脚本来启动Flask Web服务器。
    ```bash
    python web/app.py
    ```
    脚本会自动在您的默认浏览器中打开 `http://127.0.0.1:8000`。

## 使用步骤

1.  **身份验证**：在左侧的“身份验证”区域填入您的豆瓣和IMDb的用户ID及Cookie。
    - *提示*：点击输入框旁的“?”按钮可以获取如何查找Cookie的帮助。
2.  **保存配置**：点击“💾 保存配置到本地”按钮，您的凭据将被安全地存储起来。
3.  **获取数据**：
    - 在“数据获取”区域，分别点击“更新数据”按钮来抓取豆瓣和IMDb的评分。
    - 抓取过程中，您可以在下方的“运行状态”日志区看到实时进度。
    - 抓取完成后，右侧会显示数据摘要和前5条记录的预览。如果本地已有数据文件，应用启动时会自动加载。
4.  **同步中心**：
    - 当两个平台的数据都“已就绪”后，“同步中心”的按钮将被激活。
    - 选择您想要的“同步方向”。
    - **预览差异**：点击“🔍 预览差异”按钮，系统会计算并显示将要从源平台同步到目标平台的电影列表。
    - **执行同步**：确认无误后，点击“✨ 执行同步”按钮。系统会开始进行API调用，将评分逐一同步。
5.  **查看结果**：
    - **同步失败**：在同步过程中，任何因API调用失败、数据不完整或已存在于永久失败清单中的项目，都会实时显示在“同步失败”卡片中。
    - **合并数据预览**：同步操作成功结束后，界面会自动切换，显示新生成的合并CSV文件的内容预览。
    - 您可以随时点击数据预览区右上角的下载图标来获取完整的CSV文件。

## 数据所有权与工具理念

CineRecord 不仅仅是一个平台间的数据同步工具，它更是一个帮助您下载、保存和掌控个人观影记录的助手。我们坚信，您的数据完全归您自己所有。

-   **您的数据，您的资产**：您在豆瓣、IMDb等平台上标记的每一部电影、写下的每一个评分，都是您宝贵的原创内容（UGC）。这些数据的所有权应当且仅属于您本人。本工具旨在帮助您将这些数字记忆掌握在自己手中。
-   **保存您的数字记忆**：网络平台上的条目可能会因各种不可抗力而消失，导致您的观影记录出现空白。通过 CineRecord，您可以轻松地将这些记忆备份到本地，创建一个永不丢失的个人电影档案。
-   **自由迁移与探索**：拥有了自己数据的完整副本，您就获得了真正的自由。无论是想要尝试一个新的影评平台，还是希望将数据用于个人分析项目，您都不再受单一平台的限制。

我们开发此工具的初衷，就是为了在变动的互联网环境中，为您提供一个保存个人记忆、实现数据自主的可靠选择。

## 项目结构

-   `web/app.py`: Flask Web应用的主入口。
-   `web/logic.py`: 包含了核心的数据处理、差异计算和同步逻辑。
-   `web/templates/index.html`: 应用的前端HTML结构。
-   `web/static/`: 存放CSS和JavaScript文件。
-   `scrapers/`: 包含独立的豆瓣和IMDb爬虫脚本。
-   `utils/`: 包含数据合并等辅助工具脚本。
-   `data/`: 存放所有生成的CSV文件，包括原始评分、合并数据和失败清单。
-   `config/`: 存放配置文件。
-   `requirements.txt`: 项目的Python依赖列表。

